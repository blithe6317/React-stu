<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ä¸“ä¸šé¢œè‰²æ··åˆå®éªŒå®¤</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        background: linear-gradient(145deg, #1e3c72, #2a5298);
        font-family: "Segoe UI", Arial, sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #fff;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
        max-width: 800px;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.1rem;
        line-height: 1.6;
        color: #e0e0e0;
      }

      .main-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 40px;
        max-width: 900px;
      }

      .mixing-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 25px;
        background: rgba(0, 0, 0, 0.25);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        width: 100%;
        max-width: 600px;
      }

      .big-circle-container {
        position: relative;
        width: 280px;
        height: 280px;
      }

      .big-circle {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background-color: #ffffff;
        border: 4px solid #4a4a4a;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.4s ease;
        position: relative;
        overflow: visible;
      }

      .result-display {
        position: absolute;
        top: -50px;
        left: 50%;
        transform: translateX(-50%) translateY(-100%);
        background: rgba(0, 0, 0, 0.85);
        color: white;
        padding: 12px 25px;
        border-radius: 50px;
        font-weight: bold;
        font-size: 18px;
        min-width: 220px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        z-index: 20;
        transition: all 0.3s ease;
      }

      .small-circles-container {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-bottom: 10px;
      }

      .small-circle {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        cursor: grab;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5),
          inset 0 0 12px rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
        border: 3px solid rgba(255, 255, 255, 0.2);
      }

      .small-circle.red {
        background: linear-gradient(145deg, #ff5252, #b33939);
      }

      .small-circle.green {
        background: linear-gradient(145deg, #4caf50, #388e3c);
      }

      .small-circle.blue {
        background: linear-gradient(145deg, #42a5f5, #2c81ba);
      }

      .color-selectors {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        width: 100%;
        margin-top: 20px;
      }

      .color-selector {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .color-selector label {
        font-weight: bold;
        font-size: 16px;
        color: #e0e0e0;
      }

      .color-picker-area {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .color-preview {
        width: 45px;
        height: 45px;
        border-radius: 10px;
        border: 3px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        cursor: grab;
        transition: all 0.3s ease;
      }

      .color-input {
        width: 55px;
        height: 40px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
      }

      .actions {
        display: flex;
        gap: 15px;
        margin-top: 15px;
      }

      .action-btn {
        padding: 10px 20px;
        background: linear-gradient(145deg, #4a00e0, #6a11cb);
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }

      .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 15px rgba(0, 0, 0, 0.4);
      }

      .reset-btn {
        background: linear-gradient(145deg, #ff416c, #ff4b2b);
        margin-top: 15px;
        padding: 12px 30px;
        font-size: 16px;
      }

      .instructions {
        background: rgba(0, 0, 0, 0.35);
        border-radius: 15px;
        padding: 25px;
        margin-top: 20px;
        max-width: 600px;
        line-height: 1.7;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      .instructions h3 {
        color: #ffffff;
        margin-top: 0;
        margin-bottom: 15px;
        border-bottom: 1px solid #4a4a4a;
        padding-bottom: 10px;
      }

      .formula-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        padding-bottom: 8px;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.2);
      }

      .formula-row:last-child {
        border-bottom: none;
      }

      .color-info {
        margin-top: 15px;
        text-align: center;
        font-size: 14px;
        color: #cccccc;
      }

      .drag-indicator {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 12px;
        color: rgba(255, 255, 255, 0.7);
        background: rgba(0, 0, 0, 0.5);
        padding: 2px 10px;
        border-radius: 15px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ä¸“ä¸šé¢œè‰²æ··åˆå®éªŒå®¤</h1>
      <p>
        åŸºäºæ ‡å‡†RGBåŠ è‰²æ··åˆåŸç†æ„å»ºï¼Œæ”¯æŒç²¾ç¡®çš„ä¸‰åŸè‰²æ··åˆè®¡ç®—ã€‚æ‹–æ‹½é¢œè‰²çƒæˆ–è‡ªå®šä¹‰é¢œè‰²åˆ°ä¸­å¤®åŒºåŸŸï¼Œè§‚å¯Ÿå®æ—¶æ··åˆæ•ˆæœã€‚
      </p>
    </div>

    <div class="main-container">
      <div class="mixing-area">
        <div class="big-circle-container">
          <div class="big-circle" id="bigCircle">
            <div class="result-display" id="resultDisplay">
              RGB(255,255,255) #FFFFFF
            </div>
            <div class="drag-indicator">æ‹–æ‹½é¢œè‰²åˆ°æ­¤å¤„</div>
          </div>
        </div>

        <div class="small-circles-container">
          <div
            class="small-circle red"
            draggable="true"
            data-color="red"
            data-r="255"
            data-g="0"
            data-b="0"
          >
            <span>çº¢</span>
          </div>
          <div
            class="small-circle green"
            draggable="true"
            data-color="green"
            data-r="0"
            data-g="255"
            data-b="0"
          >
            <span>ç»¿</span>
          </div>
          <div
            class="small-circle blue"
            draggable="true"
            data-color="blue"
            data-r="0"
            data-g="0"
            data-b="255"
          >
            <span>è“</span>
          </div>
        </div>

        <div class="color-selectors">
          <div class="color-selector">
            <label>è‡ªå®šä¹‰é¢œè‰²1</label>
            <div class="color-picker-area">
              <input
                type="color"
                class="color-input"
                id="color1"
                value="#ff0000"
              />
              <div
                class="color-preview"
                id="colorPreview1"
                draggable="true"
                data-type="custom"
              ></div>
            </div>
          </div>

          <div class="color-selector">
            <label>è‡ªå®šä¹‰é¢œè‰²2</label>
            <div class="color-picker-area">
              <input
                type="color"
                class="color-input"
                id="color2"
                value="#00ff00"
              />
              <div
                class="color-preview"
                id="colorPreview2"
                draggable="true"
                data-type="custom"
              ></div>
            </div>
          </div>

          <div class="color-selector">
            <label>è‡ªå®šä¹‰é¢œè‰²3</label>
            <div class="color-picker-area">
              <input
                type="color"
                class="color-input"
                id="color3"
                value="#0000ff"
              />
              <div
                class="color-preview"
                id="colorPreview3"
                draggable="true"
                data-type="custom"
              ></div>
            </div>
          </div>
        </div>

        <div class="actions">
          <button class="action-btn" onclick="addColor(1)">æ·»åŠ é¢œè‰²1</button>
          <button class="action-btn" onclick="addColor(2)">æ·»åŠ é¢œè‰²2</button>
          <button class="action-btn" onclick="addColor(3)">æ·»åŠ é¢œè‰²3</button>
          <button class="action-btn reset-btn" onclick="resetColors()">
            é‡ç½®æ‰€æœ‰
          </button>
        </div>
      </div>

      <div class="instructions">
        <h3>æ··åˆåŸç†è¯´æ˜</h3>
        <div class="formula-row">
          <span>ğŸ”´ çº¢ + ğŸŸ¢ ç»¿</span>
          <span>â†’ ğŸŸ¡ é»„ (RGB(255,255,0))</span>
        </div>
        <div class="formula-row">
          <span>ğŸ”´ çº¢ + ğŸ”µ è“</span>
          <span>â†’ ğŸŸ£ å“çº¢ (RGB(255,0,255))</span>
        </div>
        <div class="formula-row">
          <span>ğŸŸ¢ ç»¿ + ğŸ”µ è“</span>
          <span>â†’ ğŸŸ¢ é’ (RGB(0,255,255))</span>
        </div>
        <div class="formula-row">
          <span>ğŸ”´ çº¢ + ğŸŸ¢ ç»¿ + ğŸ”µ è“</span>
          <span>â†’ âšª ç™½ (RGB(255,255,255))</span>
        </div>
        <div class="formula-row">
          <span>âšª ç™½ + ä»»ä½•é¢œè‰²</span>
          <span>â†’ æ–°é¢œè‰² (ç›´æ¥æ˜¾ç¤º)</span>
        </div>

        <div class="color-info">
          <p>ğŸ’¡ æç¤ºï¼šæ‹–æ‹½ä¸‹æ–¹é¢œè‰²çƒæˆ–è‡ªå®šä¹‰é¢œè‰²åˆ°ä¸­å¤®åŒºåŸŸ</p>
          <p>ğŸ’¡ æç¤ºï¼šå½“æ··åˆç»“æœä¸ºç™½è‰²æ—¶ï¼Œå†æ·»åŠ ä»»ä½•é¢œè‰²éƒ½ä¼šç›´æ¥æ˜¾ç¤ºæ–°é¢œè‰²</p>
        </div>
      </div>
    </div>

    <script>
      // é¢œè‰²æ··åˆçŠ¶æ€
      let currentColor = { r: 255, g: 255, b: 255 }; // é»˜è®¤ç™½è‰²
      const bigCircle = document.getElementById("bigCircle");
      const resultDisplay = document.getElementById("resultDisplay");
      const colorPreviews = [
        document.getElementById("colorPreview1"),
        document.getElementById("colorPreview2"),
        document.getElementById("colorPreview3"),
      ];

      // åˆå§‹åŒ–
      init();

      function init() {
        // åˆå§‹åŒ–é¢œè‰²é€‰æ‹©å™¨é¢„è§ˆ
        initColorPreviews();

        // åˆå§‹åŒ–æ‹–æ‹½äº‹ä»¶
        initDragEvents();

        // æ›´æ–°é¢œè‰²æ˜¾ç¤º
        updateColorDisplay();
      }

      // åˆå§‹åŒ–é¢œè‰²é€‰æ‹©å™¨é¢„è§ˆ
      function initColorPreviews() {
        colorPreviews.forEach((preview, index) => {
          const colorInput = document.getElementById(`color${index + 1}`);
          updatePreview(index);

          colorInput.addEventListener("input", () => {
            updatePreview(index);
          });
        });
      }

      // æ›´æ–°é¢œè‰²é¢„è§ˆ
      function updatePreview(index) {
        const colorInput = document.getElementById(`color${index + 1}`);
        const preview = colorPreviews[index];

        const color = hexToRgb(colorInput.value);
        preview.style.backgroundColor = colorInput.value;

        const rgb = color
          ? `rgb(${color.r}, ${color.g}, ${color.b})`
          : colorInput.value;

        preview.style.border = `3px solid ${rgb}`;
      }

      // åˆå§‹åŒ–æ‹–æ‹½äº‹ä»¶
      function initDragEvents() {
        // å°åœ†æ‹–æ‹½äº‹ä»¶
        const smallCircles = document.querySelectorAll(".small-circle");
        smallCircles.forEach((circle) => {
          circle.addEventListener("dragstart", (e) => {
            const colorType = e.target.dataset.color;
            const colorData = getColorValues(colorType);

            e.dataTransfer.setData("color", JSON.stringify(colorData));
            e.dataTransfer.setData("source", "preset");
            e.dataTransfer.setData("colorType", colorType);

            // æ‹–æ‹½è§†è§‰åé¦ˆ
            e.target.style.opacity = "0.7";
            e.target.style.transform = "scale(0.95)";
          });

          circle.addEventListener("dragend", (e) => {
            e.target.style.opacity = "1";
            e.target.style.transform = "scale(1)";
          });
        });

        // è‡ªå®šä¹‰é¢œè‰²é¢„è§ˆæ‹–æ‹½äº‹ä»¶
        colorPreviews.forEach((preview, index) => {
          preview.addEventListener("dragstart", (e) => {
            const colorInput = document.getElementById(`color${index + 1}`);
            const color = hexToRgb(colorInput.value);

            e.dataTransfer.setData("color", JSON.stringify(color));
            e.dataTransfer.setData("source", "custom");
            e.dataTransfer.setData("colorType", `custom${index}`);

            // æ‹–æ‹½è§†è§‰åé¦ˆ
            e.target.style.opacity = "0.7";
            e.target.style.transform = "scale(0.95)";
          });

          preview.addEventListener("dragend", (e) => {
            e.target.style.opacity = "1";
            e.target.style.transform = "scale(1)";
          });
        });

        // å¤§åœ†æ‹–æ‹½äº‹ä»¶
        bigCircle.addEventListener("dragover", (e) => {
          e.preventDefault();
          bigCircle.style.transform = "scale(1.05)";
          bigCircle.style.boxShadow =
            "0 15px 35px rgba(0,0,0,0.8), inset 0 0 25px rgba(0,0,0,0.7)";

          // æ·»åŠ æ‹–æ‹½æŒ‡ç¤ºå™¨
          const indicator = bigCircle.querySelector(".drag-indicator");
          indicator.style.opacity = "1";
          indicator.style.transform = "translateX(-50%) translateY(-10px)";
        });

        bigCircle.addEventListener("dragleave", () => {
          bigCircle.style.transform = "scale(1)";
          bigCircle.style.boxShadow =
            "0 8px 25px rgba(0,0,0,0.5), inset 0 0 20px rgba(0,0,0,0.9)";

          // éšè—æ‹–æ‹½æŒ‡ç¤ºå™¨
          const indicator = bigCircle.querySelector(".drag-indicator");
          indicator.style.opacity = "0.7";
          indicator.style.transform = "translateX(-50%)";
        });

        bigCircle.addEventListener("drop", (e) => {
          e.preventDefault();
          bigCircle.style.transform = "scale(1)";
          bigCircle.style.boxShadow =
            "0 8px 25px rgba(0,0,0,0.5), inset 0 0 20px rgba(0,0,0,0.9)";

          // éšè—æ‹–æ‹½æŒ‡ç¤ºå™¨
          const indicator = bigCircle.querySelector(".drag-indicator");
          indicator.style.opacity = "0.7";
          indicator.style.transform = "translateX(-50%)";

          // è·å–æ‹–æ‹½çš„é¢œè‰²æ•°æ®
          const colorData = e.dataTransfer.getData("color");
          const source = e.dataTransfer.getData("source");
          const colorType = e.dataTransfer.getData("colorType");

          if (colorData) {
            const color = JSON.parse(colorData);

            // æ‰§è¡Œé¢œè‰²æ··åˆ
            mixColors(color);

            // æ·»åŠ æ··åˆåŠ¨ç”»
            createMixingEffect(colorType);
          }
        });
      }

      // è·å–é¢„è®¾é¢œè‰²RGBå€¼
      function getColorValues(colorType) {
        switch (colorType) {
          case "red":
            return { r: 255, g: 0, b: 0 };
          case "green":
            return { r: 0, g: 255, b: 0 };
          case "blue":
            return { r: 0, g: 0, b: 255 };
          default:
            return { r: 0, g: 0, b: 0 };
        }
      }

      // æ ¸å¿ƒé¢œè‰²æ··åˆç®—æ³•
      function mixColors(newColor) {
        // ç‰¹æ®Šå¤„ç†ï¼šå¦‚æœå½“å‰æ˜¯ç™½è‰²ï¼Œç›´æ¥æ›¿æ¢ä¸ºæ–°é¢œè‰²
        if (isWhite(currentColor)) {
          currentColor = { ...newColor };
        } else {
          // æ ‡å‡†RGBç›¸åŠ 
          currentColor.r = Math.min(currentColor.r + newColor.r, 255);
          currentColor.g = Math.min(currentColor.g + newColor.g, 255);
          currentColor.b = Math.min(currentColor.b + newColor.b, 255);
        }

        updateColorDisplay();
      }

      // åˆ¤æ–­æ˜¯å¦ä¸ºç™½è‰²
      function isWhite(color) {
        return color.r === 255 && color.g === 255 && color.b === 255;
      }

      // æ›´æ–°é¢œè‰²æ˜¾ç¤º
      function updateColorDisplay() {
        const rgb = `RGB(${currentColor.r}, ${currentColor.g}, ${currentColor.b})`;
        const hex = rgbToHex(currentColor.r, currentColor.g, currentColor.b);
        resultDisplay.textContent = `${rgb} ${hex}`;

        // æ›´æ–°èƒŒæ™¯è‰²
        bigCircle.style.backgroundColor = `rgb(${currentColor.r}, ${currentColor.g}, ${currentColor.b})`;

        // æ›´æ–°ç»“æœæ¡†èƒŒæ™¯è‰²
        resultDisplay.style.backgroundColor = `rgba(${currentColor.r}, ${currentColor.g}, ${currentColor.b}, 0.85)`;

        // ç‰¹æ®Šå¤„ç†ç™½è‰²èƒŒæ™¯çš„æ–‡å­—é¢œè‰²
        if (
          currentColor.r > 200 &&
          currentColor.g > 200 &&
          currentColor.b > 200
        ) {
          resultDisplay.style.color = "black";
          resultDisplay.style.textShadow = "none";
        } else {
          resultDisplay.style.color = "white";
          resultDisplay.style.textShadow = "0 1px 3px rgba(0,0,0,0.8)";
        }
      }

      // æ·»åŠ æ··åˆåŠ¨ç”»
      function createMixingEffect(colorType) {
        const effect = document.createElement("div");
        effect.style.position = "absolute";
        effect.style.width = "30px";
        effect.style.height = "30px";
        effect.style.borderRadius = "50%";
        effect.style.top = "50%";
        effect.style.left = "50%";
        effect.style.transform = "translate(-50%, -50%) scale(0)";
        effect.style.opacity = "0.7";
        effect.style.zIndex = "5";
        effect.style.pointerEvents = "none";

        // æ ¹æ®æ¥æºè®¾ç½®ä¸åŒé¢œè‰²
        if (colorType.startsWith("custom")) {
          const index = colorType.replace("custom", "");
          const colorInput = document.getElementById(`color${index}`);
          effect.style.backgroundColor = colorInput.value;
        } else {
          effect.style.backgroundColor = getColorValues(colorType)
            ? `rgb(${getColorValues(colorType).r}, ${
                getColorValues(colorType).g
              }, ${getColorValues(colorType).b})`
            : "white";
        }

        bigCircle.appendChild(effect);

        // ç²’å­åŠ¨ç”»
        setTimeout(() => {
          effect.style.transform = "translate(-50%, -50%) scale(10)";
          effect.style.opacity = "0";
        }, 10);

        // ç§»é™¤ç²’å­å…ƒç´ 
        setTimeout(() => {
          effect.remove();
        }, 600);
      }

      // æ·»åŠ è‡ªå®šä¹‰é¢œè‰²
      function addColor(index) {
        const colorInput = document.getElementById(`color${index}`);
        const hexColor = colorInput.value;
        const rgbColor = hexToRgb(hexColor);

        if (!rgbColor) return;

        // ç‰¹æ®Šå¤„ç†ï¼šå¦‚æœå½“å‰æ˜¯ç™½è‰²ï¼Œç›´æ¥æ›¿æ¢ä¸ºæ–°é¢œè‰²
        if (isWhite(currentColor)) {
          currentColor = { ...rgbColor };
        } else {
          // æ ‡å‡†RGBç›¸åŠ 
          currentColor.r = Math.min(currentColor.r + rgbColor.r, 255);
          currentColor.g = Math.min(currentColor.g + rgbColor.g, 255);
          currentColor.b = Math.min(currentColor.b + rgbColor.b, 255);
        }

        updateColorDisplay();

        // æ·»åŠ æ··åˆåŠ¨ç”»
        createMixingEffect(`custom${index}`);
      }

      // åå…­è¿›åˆ¶è½¬RGB
      function hexToRgb(hex) {
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);

        if (result) {
          const r = parseInt(result[1], 16);
          const g = parseInt(result[2], 16);
          const b = parseInt(result[3], 16);

          return { r, g, b };
        }

        return null;
      }

      // RGBè½¬åå…­è¿›åˆ¶
      function rgbToHex(r, g, b) {
        return `#${componentToHex(r)}${componentToHex(g)}${componentToHex(b)}`;
      }

      function componentToHex(c) {
        const hex = c.toString(16);
        return hex.length == 1 ? "0" + hex : hex;
      }

      // é‡ç½®é¢œè‰²
      function resetColors() {
        currentColor = { r: 255, g: 255, b: 255 }; // é‡ç½®ä¸ºç™½è‰²
        updateColorDisplay();

        // é‡ç½®é¢œè‰²é€‰æ‹©å™¨ä¸ºé»˜è®¤å€¼
        document.getElementById("color1").value = "#ff0000";
        document.getElementById("color2").value = "#00ff00";
        document.getElementById("color3").value = "#0000ff";

        // æ›´æ–°é¢„è§ˆ
        initColorPreviews();
      }
    </script>
  </body>
</html>
